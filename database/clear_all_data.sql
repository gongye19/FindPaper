-- ============================================
-- 清空所有数据脚本
-- ⚠️ 警告：此操作不可逆，请谨慎使用！
-- ============================================

-- ============================================
-- 1. 清空匿名用户使用记录
-- ============================================
DELETE FROM anon_usage;

-- ============================================
-- 2. 清空注册用户使用记录
-- ============================================
DELETE FROM user_usage;

-- ============================================
-- 3. 清空用户计划记录（profiles 表）
-- ⚠️ 注意：必须先删除 profiles，因为 profiles 有外键约束引用 auth.users
-- ============================================
DELETE FROM profiles;

-- ============================================
-- 4. 清空所有注册用户（auth.users 表）
-- ⚠️ 注意：这会删除所有用户账户，包括他们的登录凭证
-- 删除顺序很重要：先删除 profiles（子表），再删除 auth.users（父表）
-- ============================================
DELETE FROM auth.users;

-- ============================================
-- 验证：查询清空后的数据
-- ============================================
SELECT 'anon_usage 记录数' as table_name, COUNT(*) as count FROM anon_usage
UNION ALL
SELECT 'user_usage 记录数', COUNT(*) FROM user_usage
UNION ALL
SELECT 'profiles 记录数', COUNT(*) FROM profiles
UNION ALL
SELECT 'auth.users 记录数', COUNT(*) FROM auth.users;

